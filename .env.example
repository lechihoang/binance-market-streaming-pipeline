# =============================================================================
# Binance-Kafka Connector Configuration
# =============================================================================

# WebSocket Configuration
BINANCE_WS_URL=wss://stream.binance.com:9443/stream
BINANCE_STREAMS=btcusdt@trade,ethusdt@trade,bnbusdt@trade,btcusdt@kline_1m,ethusdt@kline_1m,btcusdt@ticker
PING_INTERVAL_SECONDS=180
RECONNECT_MAX_DELAY_SECONDS=60
WS_CONNECTION_TIMEOUT=10

# =============================================================================
# Kafka Configuration
# =============================================================================

KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_COMPRESSION=snappy
KAFKA_ACKS=1
KAFKA_MAX_RATE_PER_PARTITION=100
KAFKA_STARTING_OFFSETS=latest

# Kafka Topics
TOPIC_RAW_TRADES=raw_trades
TOPIC_RAW_KLINES=raw_klines
TOPIC_RAW_TICKERS=raw_tickers
TOPIC_PROCESSED_AGGREGATIONS=processed_aggregations
TOPIC_PROCESSED_INDICATORS=processed_indicators
TOPIC_ALERTS=alerts

# Batching Configuration
BATCH_SIZE=100
BATCH_TIMEOUT_MS=100
BATCH_CHECK_INTERVAL_MS=10

# =============================================================================
# PySpark Streaming Processor Configuration
# =============================================================================

SPARK_EXECUTOR_MEMORY=250m
SPARK_DRIVER_MEMORY=250m
SPARK_EXECUTOR_CORES=1
SPARK_SHUFFLE_PARTITIONS=2
SPARK_CHECKPOINT_LOCATION=/tmp/spark-checkpoints
SPARK_CHECKPOINT_INTERVAL=30 seconds
SPARK_BACKPRESSURE_ENABLED=true

# =============================================================================
# Redis Configuration (Hot Path)
# =============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=10
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_CANDLE_TTL_SECONDS=3600
REDIS_INDICATOR_TTL_SECONDS=3600
REDIS_ALERT_LIST_MAX_SIZE=1000

# =============================================================================
# DuckDB Configuration
# =============================================================================

DUCKDB_DATABASE_PATH=./data/streaming.duckdb
DUCKDB_TABLE_CANDLES=candles
DUCKDB_TABLE_INDICATORS=indicators
DUCKDB_TABLE_ALERTS=alerts

# =============================================================================
# Parquet Configuration
# =============================================================================

PARQUET_OUTPUT_PATH=./data/parquet
PARQUET_COMPRESSION=snappy
PARQUET_PARTITION_COLUMNS=date,symbol

# =============================================================================
# PostgreSQL - Airflow Metadata Database
# =============================================================================

AIRFLOW_POSTGRES_USER=airflow
AIRFLOW_POSTGRES_PASSWORD=airflow
AIRFLOW_POSTGRES_DB=airflow
AIRFLOW_POSTGRES_PORT=5433

# =============================================================================
# PostgreSQL - Data Storage (Warm Path)
# =============================================================================

POSTGRES_HOST=localhost
POSTGRES_PORT=5434
POSTGRES_USER=crypto
POSTGRES_PASSWORD=crypto
POSTGRES_DB=crypto_data

# =============================================================================
# MinIO Object Storage (Cold Path)
# =============================================================================

MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=crypto-data
MINIO_SECURE=false

# =============================================================================
# Grafana Configuration
# =============================================================================

GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin

# =============================================================================
# Airflow Configuration
# =============================================================================

AIRFLOW_ADMIN_USER=admin
AIRFLOW_ADMIN_PASSWORD=admin
AIRFLOW__CORE__FERNET_KEY=ZmDfcTF7_60GrrY167zsiPd67pEvs0aGOv2oasOM1Pg=

# =============================================================================
# Logging
# =============================================================================

LOG_LEVEL=INFO
